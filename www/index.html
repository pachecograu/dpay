<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!--
  Customize this policy to fit your own app's needs. For more guidance, see:
      https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
  Some notes:
      * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
      * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
      * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
          * Enable inline JS: add 'unsafe-inline' to default-src
  -->
  <meta http-equiv="Content-Security-Policy"
    content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#2196f3">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <title>My App</title>

  <link rel="stylesheet" href="framework7/css/framework7.bundle.min.css">
  <link rel="stylesheet" href="css/icons.css">
  <link rel="stylesheet" href="css/app.css">
</head>

<body ng-app="Dpay" ng-controller="masterCtrl">
  <div id="app">
    <!-- Status bar overlay for fullscreen mode-->
    <div class="statusbar"></div>
    <!-- Left panel with cover effect-->
    <!-- <div class="panel panel-left panel-cover theme-dark">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title">Left Panel</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">Left panel content goes here</div>
          </div>
        </div>
      </div>
    </div> -->
    <!-- Right panel with reveal effect-->
    <div class="panel panel-right panel-reveal theme-dark">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title">D'Pay</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">
              <div class="list">
                <ul>
                  <li>
                    <div class="item-content">
                      <div class="item-inner">
                        <div class="item-title">{{userLoged.email}}</div>
                      </div>
                      <div class="item-media"><i class="icon material-icons">account_circle</i></div>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="list">
                <ul>
                  <li>
                    <a ui-sref="dashboard" class="item-link item-content">
                      <div class="item-media"><i class="icon material-icons">home</i></div>
                      <div class="item-inner">
                        <div class="item-title">Inicio</div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a ui-sref="users" class="item-link item-content">
                      <div class="item-media"><i class="icon material-icons">face</i></div>
                      <div class="item-inner">
                        <div class="item-title">Usuarios</div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a ui-sref="prestamos" class="item-link item-content">
                      <div class="item-media"><i class="icon material-icons">call_made</i></div>
                      <div class="item-inner">
                        <div class="item-title">Prestamos</div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a ui-sref="cobros" class="item-link item-content">
                      <div class="item-media"><i class="icon material-icons">call_received</i></div>
                      <div class="item-inner">
                        <div class="item-title">Cobros</div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a class="item-link item-content" ng-click="signOut()">
                      <div class="item-media"><i class="icon material-icons">near_me</i></div>
                      <div class="item-inner">
                        <div class="item-title">Cerrar sesion</div>
                      </div>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main safe-areas">
      <!-- Page, data-name contains page name which can be used in callbacks -->
      <div class="page" data-name="home">
        <!-- Toolbar-->
        <div class="toolbar toolbar-bottom">
          <div class="toolbar-inner">
            <div class="row" style="width: 100%;">
              <div class="col text-align-center">
                D'Pay
              </div>
            </div>
          </div>
        </div>
        <!-- Scrollable page content-->
        <ui-view>
        </ui-view>
      </div>
    </div>

    <div class="popover popover-viewUser" style="width: 80%;">
      <div class="popover-inner">
        <div class="block">
          <h3>Cliente {{userItemCobro.nombre}}</h3>
          <div class="row">
            <div class="col-100">CC. {{userItemCobro.identificacion}}</div>
          </div>
          <div class="row">
            <div class="col-100"><b>Dirección:</b> {{userItemCobro.direccion}}</div>
          </div>
          <div class="row">
            <div class="col-50">
              <div class="row">
                <div class="cell"><b>Telefonos</b></div>
              </div>
              <div class="row" ng-repeat="tel in userItemCobro.telefono">
                <div class="cell"><b>{{$index+1}}):</b> {{tel}}</div>
              </div>
            </div>
            <div class="col-50">
              <div class="row">
                <div class="cell"><b>Metodos de pago</b></div>
              </div>
              <div class="row" ng-repeat="fpago in userItemCobro.id_f_pago">
                <div class="cell">{{fpago.descripcion}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="popover popover-viewPrestamo" style="width: 80%;">
      <div class="popover-inner">
        <div class="block">
          <div class="row">
            <div class="col">
              <h3>Prestamo</h3>
            </div>
            <div class="col text-align-right padding-vertical">
              {{prestamoItemCobro.dateFrom}}
            </div>
          </div>
          <div class="row">
            <div class="col-100"><b>Fecha:</b> {{prestamoItemCobro.date}}</div>
          </div>
          <div class="row">
            <div class="col-50">
              <b>Valor: {{prestamoItemCobro.valor | currency:"$":0}}</b>
            </div>
            <div class="col-50 text-align-right">
              <b>Tiempo:</b> {{prestamoItemCobro.semanas}} Semanas
            </div>
          </div>
        </div>
        <div class="card card-outline">
          <div class="card-header">Calculo rapido</div>
          <div class="card-content card-content-padding">
            <div class="row">
              <div class="col-50 text-align-right">
                Saldo:
              </div>
              <div class="col-50">
                {{prestamoItemCobro.valor | currency:"$":0}}
              </div>
              <div class="col-50 text-align-right">
                Semanas:
              </div>
              <div class="col-50">
                {{prestamoItemCobro.semanas}}
              </div>
              <div class="col-50 text-align-right">
                %/semanas:
              </div>
              <div class="col-50">
                {{prestamoItemCobro.semanas * 5}}%
              </div>
              <div class="col-50 text-align-right">
                Total:
              </div>
              <div class="col-50">
                {{prestamoItemCobro.valor + (prestamoItemCobro.valor  * ((prestamoItemCobro.semanas * 5) / 100)) | currency:"$":0}}
              </div>
              <div class="col-100">
                <hr>
              </div>
              <div class="col-50 text-align-right">
                X Dia:
              </div>
              <div class="col-50">
                {{((prestamoItemCobro.valor + (prestamoItemCobro.valor  * ((prestamoItemCobro.semanas * 5) / 100))) / prestamoItemCobro.semanas) / 6 | currency:"$":0}}
              </div>
              <div class="col-50 text-align-right">
                X Semana:
              </div>
              <div class="col-50">
                {{(prestamoItemCobro.valor + (prestamoItemCobro.valor  * ((prestamoItemCobro.semanas * 5) / 100))) / prestamoItemCobro.semanas | currency:"$":0}}
              </div>
              <div class="col-50 text-align-right" ng-if="prestamoItemCobro.semanas  > 1">
                X Quincena:
              </div>
              <div class="col-50" ng-if="prestamoItemCobro.semanas > 1">
                {{((prestamoItemCobro.valor + (prestamoItemCobro.valor  * ((prestamoItemCobro.semanas * 5) / 100))) / prestamoItemCobro.semanas) * 2 | currency:"$":0}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Popup -->
    <div class="popup" id="create-user">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="right">
                <a class="link popup-close">
                  <i class="icon material-icons">close</i>
                </a>
              </div>
              <div class="title">Nuevo cliente</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block-title">Diligencia cada campo</div>
            <div class="list no-hairlines-md">
              <ul>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Nombres</div>
                    <div class="item-input-wrap">
                      <input type="text" ng-model="newUser.nombre" placeholder="Nombres completos">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Identificación</div>
                    <div class="item-input-wrap">
                      <input type="text" ng-model="newUser.identificacion"
                        placeholder="Numero de documento de identidad">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Dirección</div>
                    <div class="item-input-wrap">
                      <input type="text" ng-model="newUser.direccion" placeholder="Dirección de residencia">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Telefono / Celular</div>
                    <div class="item-input-wrap" ng-repeat="tel in newUser.telefono track by $index">
                      <input type="text" ng-model="newUser.telefono[$index]" placeholder="Numero de Telefono/Celular">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                  <div class="item-media" ng-click="addTelAndTp('tel')" style="align-self: initial;">
                    <i class="icon material-icons" style="font-size: 36px;">add_circle</i>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Tipo de pagos</div>
                    <div class="item-input-wrap input-dropdown-wrap"
                      ng-repeat="tpago in newUser.id_f_pago track by $index">
                      <select ng-model="newUser.id_f_pago[$index].id" ng-change="changeFp(newUser.id_f_pago[$index])"
                        placeholder="Selecciona">
                        <option value="null">Seleccione</option>
                        <option value="{{fp.id}}" ng-repeat="fp in fpagos track by $index">{{fp.descripcion}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="item-media" ng-click="addTelAndTp('fpago')" style="align-self: initial;">
                    <i class="icon material-icons" style="font-size: 36px;">add_circle</i>
                  </div>
                </li>
              </ul>
            </div>
            <div class="block">
              <div class="row">
                <div class="col">
                  <button class="col button button-fill button-round" ng-click="saveUser(newUser)">Guardar
                    cliente</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="popup" id="edit-user">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="right">
                <a class="link popup-close">
                  <i class="icon material-icons">close</i>
                </a>
              </div>
              <div class="title">Editar cliente</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block-title">Diligencia cada campo</div>
            <div class="list no-hairlines-md">
              <ul>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Nombres</div>
                    <div class="item-input-wrap">
                      <input type="text" ng-model="editUser.data.nombre" placeholder="Nombres completos">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Identificación</div>
                    <div class="item-input-wrap">
                      <input type="text" ng-model="editUser.data.identificacion"
                        placeholder="Numero de documento de identidad">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Dirección</div>
                    <div class="item-input-wrap">
                      <input type="text" ng-model="editUser.data.direccion" placeholder="Dirección de residencia">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Telefono / Celular</div>
                    <div class="item-input-wrap" ng-repeat="tel in editUser.data.telefono track by $index">
                      <input type="text" ng-model="editUser.data.telefono[$index]"
                        placeholder="Numero de Telefono/Celular">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                  <div class="item-media" ng-click="addTelAndTp('tel')" style="align-self: initial;">
                    <i class="icon material-icons" style="font-size: 36px;">add_circle</i>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Tipo de pagos</div>
                    <div class="item-input-wrap input-dropdown-wrap"
                      ng-repeat="tpago in editUser.data.id_f_pago track by $index">
                      <select ng-model="editUser.data.id_f_pago[$index].id"
                        ng-change="changeFp(editUser.data.id_f_pago[$index])" placeholder="Selecciona">
                        <option value="null">Seleccione</option>
                        <option value="{{fp.id}}" ng-repeat="fp in fpagos track by $index">{{fp.descripcion}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="item-media" ng-click="addTelAndTp('fpago')" style="align-self: initial;">
                    <i class="icon material-icons" style="font-size: 36px;">add_circle</i>
                  </div>
                </li>
              </ul>
            </div>
            <div class="block">
              <div class="row">
                <div class="col">
                  <button class="col button button-fill button-round" ng-click="UpdateUser(editUser)">Actualizar
                    cliente</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="popup" id="create-prestamo">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="right">
                <a class="link popup-close">
                  <i class="icon material-icons">close</i>
                </a>
              </div>
              <div class="title">Nuevo prestamo</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block-title">Diligencia cada campo</div>
            <div class="list no-hairlines-md">
              <ul>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <a class="link popover-open" data-popover=".popover-viewUser" ng-click="viewUser(paramUserId)"
                      style="text-decoration: underline">Ver
                      cliente</a>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Valor del prestamo</div>
                    <div class="item-input-wrap">
                      <input type="number" ng-model="newPrestamos.valor"
                        placeholder="Valor del prestamo">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">
                      <div class="row">
                        <div class="col-70">
                          Numero de semanas
                        </div>
                        <div class="col-30 text-align-right padding-right">
                          5%
                        </div>
                      </div>
                    </div>
                    <div class="item-input-wrap">
                      <input type="number" ng-model="newPrestamos.semanas" placeholder="Numero de semanas">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="block">
              <div class="card card-outline">
                <div class="card-header">Calculo rapido</div>
                <div class="card-content card-content-padding">
                  <div class="row">
                    <div class="col-50 text-align-right">
                      Saldo:
                    </div>
                    <div class="col-50">
                      {{newPrestamos.valor | currency:"$":0}}
                    </div>
                    <div class="col-50 text-align-right">
                      Semanas:
                    </div>
                    <div class="col-50">
                      {{newPrestamos.semanas}}
                    </div>
                    <div class="col-50 text-align-right">
                      %/semanas:
                    </div>
                    <div class="col-50">
                      {{newPrestamos.semanas * 5}}%
                    </div>
                    <div class="col-50 text-align-right">
                      Total:
                    </div>
                    <div class="col-50">
                      {{newPrestamos.valor + (newPrestamos.valor  * ((newPrestamos.semanas * 5) / 100)) | currency:"$":0}}
                    </div>
                    <div class="col-100">
                      <hr>
                    </div>
                    <div class="col-50 text-align-right">
                      X Dia:
                    </div>
                    <div class="col-50">
                      {{((newPrestamos.valor + (newPrestamos.valor  * ((newPrestamos.semanas * 5) / 100))) / newPrestamos.semanas) / 6 | currency:"$":0}}
                    </div>
                    <div class="col-50 text-align-right">
                      X Semana:
                    </div>
                    <div class="col-50">
                      {{(newPrestamos.valor + (newPrestamos.valor  * ((newPrestamos.semanas * 5) / 100))) / newPrestamos.semanas | currency:"$":0}}
                    </div>
                    <div class="col-50 text-align-right" ng-if="newPrestamos.semanas  > 1">
                      X Quincena:
                    </div>
                    <div class="col-50" ng-if="newPrestamos.semanas > 1">
                      {{((newPrestamos.valor + (newPrestamos.valor  * ((newPrestamos.semanas * 5) / 100))) / newPrestamos.semanas) * 2 | currency:"$":0}}
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <button class="col button button-fill button-round" ng-click="savePrestamo(newPrestamos)">
                    Guardar
                    Prestamo
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="popup" id="create-cobro">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="right">
                <a class="link popup-close">
                  <i class="icon material-icons">close</i>
                </a>
              </div>
              <div class="title">Nuevo cobro</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block-title">Diligencia cada campo</div>
            <div class="list no-hairlines-md">
              <ul>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                      <div class="row" style="width: 100%;">
                        <div class="col-50">
                          <a class="link popover-open" data-popover=".popover-viewUser"
                            ng-click="viewUser(params.idUser)" style="text-decoration: underline">Ver
                            cliente</a>
                        </div>
                        <div class="col-50 text-align-right">
                          <a class="link popover-open" data-popover=".popover-viewPrestamo"
                            ng-click="viewPrestamo(params.idPrtm)" style="text-decoration: underline">Detalles de
                            prestamo</a>
                        </div>
                      </div>
                  </div>
                </li>
                <li class="item-content item-input item-input-outline">
                  <div class="item-inner">
                    <div class="item-title item-label">Valor del abono</div>
                    <div class="item-input-wrap">
                      <input type="number" ng-model="newCobros.abono" placeholder="Valor del abono">
                      <span class="input-clear-button"></span>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="block">
              <div class="row">
                <div class="col">
                  <button class="col button button-fill button-round" ng-click="saveCobro(newCobros)">
                    Guardar
                    Cobro
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <!-- Cordova -->
  <!--
  <script src="cordova.js"></script>
  -->

  <!-- Framework7 library -->
  <script src="framework7/js/framework7.bundle.min.js"></script>
  <!-- angular js -->
  <script src="bower_components/angular/angular.min.js" charset="utf-8"></script>
  <script src="bower_components/angular-ui-router/release/angular-ui-router.min.js" charset="utf-8"></script>
  <script src="https://www.gstatic.com/firebasejs/6.5.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-firestore.js"></script>
  <script src="js/plugins/moment.min.js"></script>
  <script src="js/plugins/es.js"></script>

  <!-- Your custom app scripts -->
  <script src="js/config/app.js"></script>
  <!-- App routes -->
  <script src="js/config/routes.js"></script>
  <!-- controllers -->
  <script src="js/controllers/masterCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/loginCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/dashboardCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/usersCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/cobrosCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/prestamosCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/ptrmOnPrflCtrl.js" charset="utf-8"></script>
  <script src="js/controllers/cbrInPrtmCtrl.js"></script>
</body>

</html>